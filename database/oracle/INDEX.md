# INDEX

> 인덱스란 물리적 저장소에 저장된 데이터들을 빠르게 조회하기 위해 특정 컬럼을 기준으로 물리주소(ROWID)를 저장한 스키마 객체이다. 인덱스를 저장하는 자료구조로는 B-Tree, Bitmap, Hash 등이 있다.

### 1. B-Tree

> B-Tree 자료구조는 트리 자료구조로 모든 노드들은 키 값에 구분자 값을 가진다. 그리고 리프 노드에만 실제 테이블 위치를 가리키는 값(ROWID)이 저장된다.
>  그래서 특정 인덱스 값으로 데이터를 찾을 때 루트 노드에서 리프노드까지 내려와 실제 물리적 데이터 위치를 찾는 방식이다. 그리고 리프노드들끼리는 LinkedList로 연결되어 Range Scan이 가능하다.    
>  B-Tree 자료구조 특성상 트리의 높이가 일정하기 때문에 어느 리프 노드를 찾더라도 일정하게 O(logN)의 시간복잡도를 가진다.
>  조회 시에는 BST(Binary Search Tree)보다 빠르지만 데이터를 생성, 수정, 삭제 시 정렬해야하는 비용이 발생한다는 단점이 있다. B-tree 자료구조는 오라클에서 default로 지정되어있다.

![image](https://user-images.githubusercontent.com/89891704/211573152-a89b8f7b-05bf-4225-a255-fbc51e2c568a.png)


### 2. Bitmap

> Bitmap 인덱스는 2차원 자료구조로 비트값으로 Y축은 ROWID, X축은 컬럼 값을 나타낸다. 해당 인덱스는 조회시 비트 연산을 통해 조회하므로 매우 빠르게 조회가 가능하다. 
> 그러나 카디널리티가 낮은(예를 들면 성별, 통신사, 지역 등) 컬럼과 해당 컬럼 값의 종류가 고정되어야만 사용하는 것이 좋다.   
> 카디널리티가 큰 컬럼을 기준으로 비트맵 인덱스를 생성한다면 X축의 길이가 길어지고 그만큼 저장공간을 많이 차지하게 된다. 
> 뿐만 아니라 컬럼 값의 종류가 추가되는 경우 기존 자료구조에서 X축의 길이가 한 칸 늘어나므로 자료구조를 변경해야한다. 이런 비용이 발생하기 때문에 컬럼값의 종류가 고정되어야한다. 

![image](https://user-images.githubusercontent.com/89891704/211579719-23218d0e-6be2-490b-a85f-a95fed0be06b.png)


### 3. Hash Index

> 해시 인덱스는 인덱스 키를 해시 함수로 변환한 값으로 rowid를 저장하는 자료구조이다. 다른 자료구조들은 디스크에 저장되는 반면, 해당 자료구조는 메모리에 저장되고 저장 공간 또한 작다는 특징이 있따.
> rowid를 조회하는 시간복잡도는 O(1)로 매우 빠르다고 볼 수 있다. 그렇지만 Unique scan만 가능하고 Range scan은 불가능하다는 단점이 있다.   
> 또한, 카디널리티가 높은 컬럼에서 사용하는 것이 효율적이다. 카디널리티가 낮을 경우 같은 해시 키를 가지는 값이 많아지고 Linked List가 늘어나 O(1)의 성능이 나지 않게 된다.   
> 참고로 오라클에서는 해당 자료구조를 Join에서도 사용한다. 즉, Hash Join을 제공한다.

![image](https://user-images.githubusercontent.com/89891704/211584364-a72db45b-3122-4c51-a10a-e862301d4ab5.png)
